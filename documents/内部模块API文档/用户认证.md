# 用户认证模块API文档
> 2018.4.7   
> by： samchevia   
> 信息传递方式基于Json  

## 返回的错误信息格式说明
> 之后的文档中将不再继续详细说明字段含义

|字段名|含义|
|:--|:--|
|status|状态|
|info|错误的信息|

```javascript
//样例 服务发生错误：非法访问
{
  "status": false,
  "info": "Illegal visit"
}
```

## 功能API说明

#### 1. 登录
```javascript
//内部API访问地址如下
"http://myhost:port/auth/get"
```
###### 字段说明

|字段名|格式|含义|必填|
|:--|:--|:--|:-:|
|user|text|用户的用户名，手机号或邮箱地址|是|
|pw|sha256加密字符串|用户密码的加密值|是|

###### 返回值说明

|字段名|含义|
|:--|:--|
|token|登录成功返回的token令牌|

```javascript
//样例 登录成功
{
  "token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1MDgyNDQ1MTAsImlhdCI6MTUwODI0MzMxMCwid"
}
//样例 有错误产生: 错误的账户或密码
{
  "status": false,
  "info": "wrong account or password."
}
```

#### 2. 注册
```javascript
//内部API访问地址如下
"http://myhost:port/auth/post"
```
###### 字段说明
|字段名|格式|含义|必填|
|:--|:--|:--|:-:|
|user|text 支持中文|用户名|是|
|phone|number|电话|是|
|email|text|电子邮箱|否|
|pw|sha256加密字符串|用户密码的加密值|是|
|gender|text|用户性别|否|

###### 返回值说明

|字段名|含义|
|:--|:--|
|token|登录成功返回的token令牌|

```javascript
//样例 登录成功
{
  "token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1MDgyNDQ1MTAsImlhdCI6MTUwODI0MzMxMCwid"
}
//样例 有错误产生: 未提供足够的参数
{
  "status": false,
  "info": "insufficient params"
}
```

#### 3. 更新token
```javascript
//内部API访问地址如下
"http://myhost:port/auth/update"
```
###### 字段说明

|字段名|格式|含义|必填|
|:--|:--|:--|:-:|
|oldToken|text|需要被更新的token|是|

###### 返回值说明

|字段名|含义|
|:--|:--|
|token|登录成功返回的token令牌|

~~~javascript
//样例 更新成功
{
  "token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1MDgyNDQ1MTAsImlhdCI6MTUwODI0MzMxMCwid"
}
//样例 有错误产生: 非法的token
{
  "status": false,
  "info": "Illegal token"
}
~~~
